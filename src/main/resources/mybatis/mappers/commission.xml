<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.project_lupin.dao.CommissionDAO">

	<insert id="insertCommission" parameterType="com.boot.project_lupin.dto.CommissionDTO">
	    INSERT INTO commission_tb
	    (
			user_id,
			commission_email,
			commission_phone,
			commission_title,
			commission_author,
			commission_size,
			purchasePrice,
			commission_collection,
			commission_etc,
			wishPrice,
			commission_state
	    )
	    VALUES
	    (
			"2",
			#{commission_email},
			#{commission_phone},
			#{commission_title},
			#{commission_author},
			#{commission_size},
			#{purchasePrice},
			#{commission_collection},
			#{commission_etc},
			#{wishPrice},
			"대기중"
		)
	</insert>


	<!--파일 업로드 -->
	<insert id="commissionInsertFile">
		insert into question_attach(uuid ,uploadPath ,fileName, image, commission_id)
		values(#{uuid},#{uploadPath},#{fileName},#{image},#{commission_id})
	</insert>

	<select id="commissionGetFileList" resultType="com.boot.project_lupin.dto.CommissionAttachDTO">
		select uuid ,uploadPath ,fileName, image, commission_id
		from question_attach where question_id=#{commission_id}
	</select>

<!--	<delete id="commissionDeleteFile">-->
<!--		delete from question_attach where question_id=#{question_id}-->
<!--	</delete>-->

</mapper>
