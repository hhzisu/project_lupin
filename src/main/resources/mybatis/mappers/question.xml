<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.project_lupin.dao.QuestionDAO">

	<insert id="insertQuestion" parameterType="com.boot.project_lupin.dto.QuestionDTO" useGeneratedKeys="true" keyProperty="question_id">
	    INSERT INTO question_tb
	    (
	        question_type,
	        question_title,
	        question_content,
	        user_id
	    )
	    VALUES
	    (
	        #{question_type},
	        #{question_title},
	        #{question_content},
	        "12"
	    )
	</insert>

	<select id="questionList" resultType="com.boot.project_lupin.dto.QuestionDTO" parameterType="int">
		SELECT
		question_id,
		question_type,
		question_title,
		question_content,
		question_answer,
		user_id
		FROM
		question_tb
		WHERE
		user_id = "12"
	</select>




	<!--파일 업로드 -->
	<insert id="questionInsertFile">
		insert into question_attach(uuid ,uploadPath ,fileName, image, question_id)
		values(#{uuid},#{uploadPath},#{fileName},#{image},#{question_id})
	</insert>

	<select id="questionGetFileList" resultType="com.boot.project_lupin.dto.QuestionAttachDTO">
		select uuid ,uploadPath ,fileName, image, question_id
		from question_attach where question_id=#{question_id}
	</select>

	<delete id="questionDeleteFile">
		delete from question_attach where question_id=#{question_id}
	</delete>

</mapper>
